"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[48880],{48880:function(t,o,e){e.r(o),e.d(o,{SimilarityProducts:function(){return i}});var r=e(90006),n=e(18969);const i=()=>((0,n.$)(r.vV),null)},77970:function(t,o,e){e.d(o,{X:function(){return c}});var r=e(53027),n=e(85980),i=e(84563),u=e(57493);const c=function(){let t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];const[o,e]=(0,r.useState)(!1),c=(0,n.useDispatch)(),d=(0,n.useSelector)(i.BO),l=(0,n.useSelector)(i.mH);return(0,r.useEffect)((()=>{t&&!o&&(c((0,u._k)()),e(!0))}),[c,t,o]),{playlists:d,productHistory:l,hasBeenAlreadyRetrieved:o}}},18969:function(t,o,e){e.d(o,{$:function(){return b}});var r=e(53027),n=e(85980),i=e(77472),u=e(77970),c=e(57493),d=e(66699),l=e(44179),s=e(24157),a=e(88422),v=e(36255),m=e(27838),y=e(19737);const p=(t,o,e)=>(0,v.Nk)(y.rN,{platformId:(0,m.Xf)().toUpperCase(),market:(0,m.tP)()?"B2B":"B2C",engineNames:t||[],abtestPools:"aaa",modelIds:o||[],...e&&{limit:e}},{"x-mm-page-type":(0,m.tP)()?"web_homepage_b2b":"web_homepage_b2c"});var f=e(3516),g=e(49435);function*h(t){try{const{userId:o}=yield(0,d.Ys)(a.aF),e=yield(0,d.Ys)(s.g),r=o?yield(0,d.RE)(g.V.calculateUserIdHash,String(o)):e,n=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return{facetFilters:[t.map(((o,e)=>"objectID: ".concat(o,"<score=").concat(t.length-e,">")))],attributesToRetrieve:["model_id"]}}(t.productIds),i=(yield(0,d.RE)(f.yC,n,r)).map((t=>t.hits.map((t=>t.model_id))))[0];let u={};i.length>0&&(u=yield(0,d.RE)(p,t.recommendationEngines,i));const l=u.recommendationEngines?u.recommendationEngines.map((t=>({engineName:t.engineName,modelIds:t.productCollection.modelIds}))):[];l[0]&&(yield(0,d.gz)((0,c.d)(l[0])))}catch(o){l.Z.error(o)}}function*H(){yield(0,d.$6)([(0,d.Fm)(c._n,h),(0,d.Fm)(c.p$,h)])}var _=e(27325);const b=function(t){let o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;(0,i.R)("modelIdsRecommendationsFromProductHistory",H);const e=(0,n.useDispatch)(),d=(0,_.A)(t),{productHistory:l}=(0,u.X)();return(0,r.useEffect)((()=>{if((!d||d&&0===d.length)&&l&&l.length>0){const r=null===l||void 0===l?void 0:l.slice(0,o).map((t=>t.productId));"FrequentlyBoughtTogether"===t?e((0,c.yP)(r,["FrequentlyBoughtTogether"])):"SimilarityML_v2"===t&&e((0,c.ah)(r,["SimilarityML_v2"]))}}),[e,d,t,l,o]),d}},27325:function(t,o,e){e.d(o,{A:function(){return i},z:function(){return n}});var r=e(85980);const n=t=>o=>{var e,r,n,i;return(null===(e=o.productDiscovery)||void 0===e||null===(r=e.productHistory)||void 0===r?void 0:r.recommendationsFromProductHistory)?null===(n=o.productDiscovery)||void 0===n||null===(i=n.productHistory)||void 0===i?void 0:i.recommendationsFromProductHistory[t]:[]},i=t=>(0,r.useSelector)(n(t))},84563:function(t,o,e){e.d(o,{BO:function(){return r},Ms:function(){return i},WH:function(){return u},mH:function(){return n}});const r=t=>{var o,e;return null===(o=t.productDiscovery)||void 0===o||null===(e=o.productHistory)||void 0===e?void 0:e.playlistHistory},n=t=>{var o,e;return(null===(o=t.productDiscovery)||void 0===o||null===(e=o.productHistory)||void 0===e?void 0:e.productHistory)||null},i=t=>{var o,e;return(null===(o=t.productDiscovery)||void 0===o||null===(e=o.productHistory)||void 0===e?void 0:e.fetching)||!1},u=t=>{var o,e;return(null===(o=t.productDiscovery)||void 0===o||null===(e=o.productHistory)||void 0===e?void 0:e.errorPlaylist)||null}}}]);
//# sourceMappingURL=48880.1bda6c3190a5bb7b.js.map