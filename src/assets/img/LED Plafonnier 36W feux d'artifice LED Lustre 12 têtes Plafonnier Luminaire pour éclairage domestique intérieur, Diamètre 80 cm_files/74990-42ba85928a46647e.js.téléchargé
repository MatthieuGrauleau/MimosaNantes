(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[74990],{36255:function(e,t,n){"use strict";n.d(t,{Lp:function(){return g},Nk:function(){return b}});var i=n(26997),a=n(11235),r=n(36559),o=n.n(r),s=n(34155);const c={timestamp:()=>',"time":"'.concat((new Date).toISOString(),'"'),messageKey:"message",formatters:{level:e=>({level:e}),log:e=>{const{isAxiosError:t,message:n,stack:i,missingSponsoredProducts:a}=e,r={message:n};if(t){const{config:t,response:n}=e;r["http.method"]=t.method,r["http.url"]=t.url,r["http.status_code"]=null===n||void 0===n?void 0:n.status}if(i&&(r["error.kind"]=e.name,r["error.stack"]=i),"true"===s.env.LOG_ALGOLIA_STACK_TRACES){var o;const t=null!==(o=e.transporterStackTrace)&&void 0!==o?o:e.stackTrace;t&&(r["error.algolia_stack"]=t,r["error.kind"]=e.name)}return a&&(r["details.missing_sponsored_products"]=a),r}},hooks:{logMethod(e,t){("string"===typeof e[0]?e[0]:e[0].message).includes("Request failed with status code 404")||t.apply(this,e)}}},l=o()(c);console.error=l.error.bind(l);var d=l,p=n(60456),u=n(9967);const m={headers:{"content-type":"application/json","apollographql-client-name":"spartacux-".concat(u.YO),"apollographql-client-version":"1.0"},credentials:"include"},h={url:u.bb?"".concat((0,p.W)("GRAPHQL_GATEWAY_URL")):"".concat((0,p.W)("GRAPHQL_GATEWAY_URL_INTERNAL")),preferGetMethod:!0,exchanges:[i.Ek],fetchOptions:()=>({...m})},g=new i.KU(h),f=(e,t)=>e?a.W.OK:t&&t.graphQLErrors&&t.graphQLErrors.find((e=>{let{message:t}=e;return t.includes("timeout")}))?a.W.GATEWAY_TIMEOUT_ERROR:t?a.W.INTERNAL_ERROR:a.W.NOT_FOUND,v=async(e,t,n)=>{var i,r,o,s;const c=await g.query(e,t,n).toPromise(),l=null===c||void 0===c?void 0:c.error,p=l?{name:l.name,message:l.message,graphQLErrors:l.graphQLErrors&&JSON.parse(JSON.stringify(l.graphQLErrors)),networkError:l.networkError?{name:null===(i=l.networkError)||void 0===i?void 0:i.name,message:null===(r=l.networkError)||void 0===r?void 0:r.message}:null}:null;return p&&d.error("Error while calling ".concat("string"===typeof e?e:JSON.stringify(null===(o=e.definitions[0])||void 0===o||null===(s=o.name)||void 0===s?void 0:s.value),": ").concat(JSON.stringify(p))),{statusCode:c?f(c.data,p):a.W.NOT_FOUND,data:(null===c||void 0===c?void 0:c.data)||null,error:p,hasAnyError:!!p,fullyFailed:!!p&&!(null===c||void 0===c?void 0:c.data)}},b=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0;const i=n?{fetchOptions:{...m,headers:{...m.headers,...n}}}:void 0,a=await v(e,t,i);if(null===a||void 0===a?void 0:a.hasAnyError)throw a.error;return null===a||void 0===a?void 0:a.data}},34237:function(e,t,n){"use strict";n.d(t,{k:function(){return b}});var i=n(85893),a=n(93967),r=n.n(a),o=n(85980),s=n(9570),c=n(19936),l=n(94783),d=n(59562),p=n(13944),u=n(72702),m=n(15042),h=n(29793),g=n.n(h),f=n(48881),v=n.n(f);const b=e=>{let{className:t,sponsor:n,advertiser:a,userSegments:h,spaceSlug:f,pageType:b,withRadius:w=!0}=e;const y=r()(v().root,t,{[v().withRadius]:w}),_=(0,o.useDispatch)(),k={sponsor:n,advertiser:a,userSegments:!!h,dsaPopup:!(!n&&!a),content:(0,p.u)(a||"",n||"",!!h,g().content)};return(0,i.jsxs)("div",{className:y,"data-testid":"banner-spr-label",children:[(0,i.jsx)(c.E,{className:v().infoIcon}),(0,i.jsx)(s.x,{tag:"span",type:"small",className:v().label,onClick:e=>{e.preventDefault(),_((0,d.hk)(k)),l.P.push((0,m.v)(f||"",b||""))},children:u.uE})]})};b.displayName="BannerCampaignAdvertiserLabel"},74990:function(e,t,n){"use strict";n.r(t),n.d(t,{ListingCampaignCards:function(){return J}});var i=n(85893),a=n(53027),r=n(70131),o=n(318),s=n(3479),c=n(85980),l=n(77472),d=n(41325),p=n.n(d),u=n(46360),m=n(36594),h=n(94783),g=n(27838);var f=n(59064),v=n.n(f);const b=p()((async()=>(await Promise.all([n.e(54483),n.e(21194)]).then(n.bind(n,54091))).CampaignModal),{loadableGenerated:{webpack:()=>[54091]}}),w=e=>{let{sizes:t,campaign:n,className:r,bannerType:s}=e;const[c,l]=(0,a.useState)(!1),[d]=(0,o.Z)((()=>{h.P.push(((e,t,n,i)=>({event:"interaction_display_campaign",e_category:"ecommerce",e_action:"Display campaign",event_trigger:e,e_label:"category",amp_event_name:"Display campaign",campaign_name:e,campaign_id:t,campaign_market:(0,g.tP)()?"b2b":"b2c",has_sponsored_label:i,space_slug:"".concat(n,"_banner"),page_type:"category_listing"}))(n.name,n.id,s,!(!n.sponsor||!n.advertiser)))})),p=()=>{h.P.push(((e,t,n)=>({event:"interaction_click_campaign",e_category:"ecommerce",e_action:"Click on campaign",event_trigger:e,e_label:"category",amp_event_name:"Click on campaign",campaign_name:e,campaign_id:t,campaign_market:(0,g.tP)()?"b2b":"b2c",space_slug:"".concat(n,"_banner"),page_type:"category_listing"}))(n.name,n.id,s))},{link:f,image:w}=n,y=(0,i.jsxs)(u.Ee,{width:t.small.ldpi.width,height:t.small.ldpi.height,loading:"eager",alt:w.altText,src:"".concat(w.mobileUrl,"?w=").concat(t.small.ldpi.width,"&h=").concat(t.small.ldpi.height,"&fit=cover"),srcSet:"".concat(w.mobileUrl,"?w=").concat(t.small.ldpi.width,"&h=").concat(t.small.ldpi.height,"&fit=cover 1x, ").concat(w.mobileUrl,"?w=").concat(t.small.hdpi.width,"&h=").concat(t.small.hdpi.height,"&fit=cover 2x"),className:r,children:[(0,i.jsx)("source",{srcSet:"".concat(w.desktopUrl,"?w=").concat(t.large.ldpi.width,"&h=").concat(t.large.ldpi.height,"&fit=cover&format=webp 1x, ").concat(w.desktopUrl,"?w=").concat(t.large.hdpi.width,"&h=").concat(t.large.hdpi.height,"&fit=cover&format=webp 2x"),media:"(min-width: 1024px)",type:"image/webp"}),(0,i.jsx)("source",{srcSet:"".concat(w.desktopUrl,"?w=").concat(t.large.ldpi.width,"&h=").concat(t.large.ldpi.height,"&fit=cover 1x, ").concat(w.desktopUrl,"?w=").concat(t.large.hdpi.width,"&h=").concat(t.large.hdpi.height,"&fit=cover 2x"),media:"(min-width: 1024px)"}),(0,i.jsx)("source",{srcSet:"".concat(w.desktopUrl,"?w=").concat(t.medium.ldpi.width,"&h=").concat(t.medium.ldpi.height,"&fit=cover&format=webp 1x, ").concat(w.desktopUrl,"?w=").concat(t.medium.hdpi.width,"&h=").concat(t.medium.hdpi.height,"&fit=cover&format=webp 2x"),media:"(min-width: 536px)",type:"image/webp"}),(0,i.jsx)("source",{srcSet:"".concat(w.desktopUrl,"?w=").concat(t.medium.ldpi.width,"&h=").concat(t.medium.ldpi.height,"&fit=cover 1x, ").concat(w.desktopUrl,"?w=").concat(t.medium.hdpi.width,"&h=").concat(t.medium.hdpi.height,"&fit=cover 2x"),media:"(min-width: 536px)"}),(0,i.jsx)("source",{srcSet:"".concat(w.mobileUrl,"?w=").concat(t.small.ldpi.width,"&h=").concat(t.small.ldpi.height,"&fit=cover&format=webp 1x, ").concat(w.mobileUrl,"?w=").concat(t.small.hdpi.width,"&h=").concat(t.small.hdpi.height,"&fit=cover&format=webp 2x"),type:"image/webp"})]});return f.url?(0,i.jsx)(i.Fragment,{children:"_modal"!==f.target?(0,i.jsx)(m.r,{"data-testid":"link",href:f.url,target:f.target||"_self",ref:d,onClick:p,className:v().itemLink,children:y}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("button",{"data-testid":"link-modal",className:v().itemLink,onClick:()=>{l(!0),p()},type:"button",ref:d,children:y}),c&&(0,i.jsx)(b,{url:f.url,onClose:()=>l(!1)})]})}):(0,i.jsx)("span",{"data-testid":"no-link",className:v().itemLink,children:y})};var y=n(50421),_=n(66699),k=n(44639),N=n(44179),x=n(36255),T=n(19737);const E=(e,t,n,i)=>{const a=n?n.split(",").map((e=>parseInt(e,10))):[];let r;return r="listing"===e||"middle"===e?"technical"===t?T.Ng.LISTING_MIDDLE_TECHNICAL:T.Ng.LISTING_MIDDLE_INSPIRATIONAL:"technical"===t?T.Ng.LISTING_BOTTOM_TECHNICAL:T.Ng.LISTING_BOTTOM_INSPIRATIONAL,(0,x.Nk)(T._V,{platform:(0,g.Xf)().toUpperCase(),market:(0,g.tP)()?"B2B":"B2C",userSegments:i||{},categoryIds:a,space:r}).then((e=>e.listingCampaigns))};var S,I=n(39701),L=n(82568),C=n(6525);const R=e=>{var t,n;return null!==(S=null===(t=(0,C.c7)(e))||void 0===t||null===(n=t.breadcrumb)||void 0===n?void 0:n.reduceRight(((e,t)=>0!==t.id?e.concat(t.id):e),[]).join())&&void 0!==S?S:""};var j=n(72279),D=n(60708),U=n(39158);function*O(){switch(yield(0,_.Ys)(D.D)){case"category":return yield(0,_.Ys)(R);case"massLanding":return yield(0,_.Ys)(j.Zs);default:return""}}function*A(e){yield(0,_.gz)((0,y.Hn)(e.bannerType));try{const t=yield(0,_.Ys)(k.ht),n=yield(0,_.Ys)(U.id),i=yield(0,_.RE)(O),a=yield(0,_.RE)(L.s);let r=[];r=yield(0,_.RE)(E,e.bannerType,e.presentation||"technical",i,a);const o=r&&r.length>0?r.filter((e=>(0,I.l)(e,t,n))):[];yield(0,_.gz)((0,y.Z$)(e.bannerType,o))}catch(t){N.Z.error(t),yield(0,_.gz)((0,y.wg)(e.bannerType))}}function*F(){yield(0,_.Fm)(y.kt,A)}var P=n(93987);var M=n(34237),B=n(17322),G=n.n(B);const z={small:{ldpi:{width:328,height:393},hdpi:{width:656,height:786}},medium:{ldpi:{width:380,height:411},hdpi:{width:760,height:822}},large:{ldpi:{width:510,height:411},hdpi:{width:1020,height:822}}},W={small:{ldpi:{width:335,height:417},hdpi:{width:670,height:834}},medium:{ldpi:{width:405,height:417},hdpi:{width:810,height:834}},large:{ldpi:{width:335,height:417},hdpi:{width:670,height:834}}},H=e=>{let{type:t,presentation:n}=e;(0,l.R)("merchandizingManagerSaga",F);const{isFetching:r,campaigns:o}=(e=>(0,c.useSelector)((e=>t=>{var n;return null===(n=(e=>{var t;return null===(t=e.productDiscovery)||void 0===t?void 0:t.merchandizingBanners})(t))||void 0===n?void 0:n[e]})(e))||P.d[e])(t),s=o&&(null===o||void 0===o?void 0:o.length)>0?o[0]:null,d=(0,c.useDispatch)();return(0,a.useEffect)((()=>{d((0,y.Lo)(t,n))}),[d,t,n]),r||!s?(0,i.jsx)("div",{className:G().skeleton}):s&&(0,i.jsxs)(i.Fragment,{children:[(s.sponsor||s.advertiser)&&(0,i.jsx)(M.k,{sponsor:s.sponsor,advertiser:s.advertiser,userSegments:s.userSegments,spaceSlug:"".concat(t,"_banner")}),(0,i.jsx)(w,{campaign:s,sizes:"technical"===n?z:W,className:G().card,bannerType:"bottom"===t?"bottom":"middle"})]})};H.displayName="ListingCampaignCard";var Y=n(40319),Z=n.n(Y);const Q=()=>n.e(24990).then(n.bind(n,24990)).then((e=>e.merchandizingBannerReducer)),J=e=>{let{middleDisabled:t=!1,middleClassName:n,bottomClassName:c,bottomDisabled:l=!1,presentation:d="technical",onViewed:p}=e;const[u,m]=(0,r.useInView)({rootMargin:"300px 0px"}),[h,g]=(0,a.useState)(m),[f,v]=(0,r.useInView)({rootMargin:"300px 0px"}),[b,w]=(0,a.useState)(v),[y]=(0,o.Z)((()=>{p&&p()}),{skip:!p}),[_]=(0,o.Z)((()=>{p&&p()}),{skip:!p});return(0,a.useEffect)((()=>{m&&!h&&g(!0)}),[m,h,p]),(0,a.useEffect)((()=>{v&&!b&&w(!0)}),[v,b,p]),(0,s.g)("productDiscovery.merchandizingBanners",Q,{condition:m||v}),(0,i.jsxs)(i.Fragment,{children:[!t&&(0,i.jsx)("div",{ref:u,className:n,"data-testid":"parent-middle-banner",children:(0,i.jsx)("div",{ref:y,className:Z().campaignContainer,children:h&&(0,i.jsx)(H,{type:"middle",presentation:d})})}),!l&&(0,i.jsx)("div",{ref:f,className:c,children:(0,i.jsx)("div",{ref:_,className:Z().campaignContainer,children:b&&(0,i.jsx)(H,{type:"bottom",presentation:d})})})]})};J.displayName="ListingCampaignCards"},15042:function(e,t,n){"use strict";n.d(t,{v:function(){return i}});const i=(e,t)=>({event:"interaction_display popin info",event_trigger:"click",amp_event_name:"Display popin info",label_name:"sponsored label",space_slug:e,page_type:t})},39701:function(e,t,n){"use strict";n.d(t,{l:function(){return i},u:function(){return a}});const i=(e,t,n)=>{if(e.abTest){if(!!t[e.abTest.id]!==("b"===e.abTest.feature))return!1}if(e.featureFlag){if(!!n[e.featureFlag.id]!==e.featureFlag.active)return!1}return!0},a=(e,t,n)=>{if(e.abTest){if(!!t.includes(e.abTest.id)!==("b"===e.abTest.feature))return!1}if(e.featureFlag){if(!!n.includes(e.featureFlag.id)!==e.featureFlag.active)return!1}return!0}},13944:function(e,t,n){"use strict";n.d(t,{u:function(){return s}});var i=n(82042);const{sponsorInfoBannerNoUserSegmentDescription:a}=(0,i.Iu)({sponsorInfoBannerNoUserSegmentDescription:"Publicit\xe9 affich\xe9e sans prise en compte de votre activit\xe9 sur ManoMano."}),r=(0,i.tC)("Publicit\xe9 affich\xe9e selon les informations de votre compte et/ou votre activit\xe9 sur ManoMano. <a>En savoir plus</a>.",void 0,void 0,"fr");var o=n(21142);const s=(e,t,n,i)=>"\n  <div class=".concat(i,">\n    <header>").concat(o.C0||"","</header>\n    <div>\n      <p>\n        ").concat(n?r.format({a:e=>"<a href=".concat(o.c6,">").concat(e,"</a>")}):a,"\n      </p>\n      <p>\n        ").concat(o.i0.format({name:e,strong:e=>"<strong>".concat(e,"</strong>")}),"\n      </p>\n      <p>\n        ").concat(o.I0.format({name:t,strong:e=>"<strong>".concat(e,"</strong>")}),"\n      </p>\n    </div>\n  </div>\n")},82568:function(e,t,n){"use strict";n.d(t,{s:function(){return r}});var i=n(66699),a=n(88545);function*r(){return yield(0,i.Ys)(a.Ju)}},50421:function(e,t,n){"use strict";n.d(t,{Hn:function(){return c},Lo:function(){return s},PN:function(){return r},Z$:function(){return l},ai:function(){return o},kt:function(){return i},wg:function(){return d},wt:function(){return a}});const i="productDiscovery/merchandizingBanner/INIT",a="productDiscovery/merchandizingBanner/FETCHING",r="productDiscovery/merchandizingBanner/FETCH_SUCCESS",o="productDiscovery/merchandizingBanner/FETCH_FAILED",s=(e,t)=>({type:i,bannerType:e,presentation:t}),c=e=>({type:a,bannerType:e}),l=(e,t)=>({type:r,bannerType:e,campaigns:t}),d=e=>({type:o,bannerType:e})},93987:function(e,t,n){"use strict";n.d(t,{d:function(){return i}});const i={middle:{isFetching:!1},bottom:{isFetching:!1},listing:{isFetching:!1}}},72702:function(e,t,n){"use strict";n.d(t,{GT:function(){return a},k:function(){return r},uE:function(){return o}});var i=n(82042);const{sponsoredRecommendationTitle:a}=(0,i.Iu)({sponsoredRecommendationTitle:"Produits similaires que vous pourriez aimer"}),{sponsoredRecommendationSubtitle:r}=(0,i.Iu)({sponsoredRecommendationSubtitle:"Sponsoris\xe9"}),{sponsoredRecommendationTooltipLabel:o}=(0,i.Iu)({sponsoredRecommendationTooltipLabel:"Sponsoris\xe9"})},29793:function(e){e.exports={modalWrapper:"d0oULJ",content:"eUCpfa"}},48881:function(e){e.exports={root:"c4iHiiE",withRadius:"OHD5oy",infoIcon:"sWUYpW",label:"JMD5pW"}},17322:function(e){e.exports={card:"OSUkNZ",skeleton:"c6uZbSS"}},59064:function(e){e.exports={itemLink:"oFrQCn"}}}]);
//# sourceMappingURL=74990-42ba85928a46647e.js.map