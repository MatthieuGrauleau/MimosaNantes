"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[47724,73085,64959],{3917:function(t,n,r){r.d(n,{Y:function(){return i}});var e=r(53027),o=(r(44179),r(67571));function i(t,n){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const{clean:i=!1}=r,{storeManager:u}=(0,o.T)();(0,e.useEffect)((()=>{if((null===u||void 0===u?void 0:u.isReducerRegistered(t))||("function"===typeof n?null===u||void 0===u||u.injectModuleReducer(t,n):null===u||void 0===u||u.injectDomainReducers(t,n)),i)return()=>{"function"===typeof n?null===u||void 0===u||u.removeModuleReducer(t):null===u||void 0===u||u.removeDomainReducers(t)}}),[t,i,n,u])}},64959:function(t,n,r){r.r(n),r.d(n,{SafeStorage:function(){return i}});let e=null,o=null;class i{static getLocalStorage(){if(!e){let n;try{n=window.localStorage}catch(t){n=null}e=Object.freeze(new i(n))}return e}static getSessionStorage(){if(!o){let n;try{n=window.sessionStorage}catch(t){n=null}o=Object.freeze(new i(n))}return o}get length(){return this.storage?this.storage.length:0}get isStorageAvailable(){return!!this.storage}key(t){return this.storage?this.storage.key(t):null}getItem(t,n){if(!this.storage)return null;const{converter:r,owner:e}=n||{},o=this.storage.getItem(t);if(!o)return null;let i;try{if(i=JSON.parse(o),"object"!==typeof i)throw new Error("Untrusted item!")}catch(s){return this.removeItem(t),null}const{expiry:u,value:c,owner:a}=i;return void 0===c||u&&("number"!==typeof u||Number.isNaN(u)||(new Date).getTime()>u)||e&&e!==a?(this.removeItem(t),null):r?r(c):c}setItem(t,n,r){if(this.storage){const{ttl:e,converter:o,owner:i}=r||{},u={value:o?o(n):n};e&&(u.expiry=(new Date).getTime()+e),i&&(u.owner=i),this.storage.setItem(t,JSON.stringify(u))}return this}removeItem(t){return this.storage&&this.storage.removeItem(t),this}clear(){return this.storage&&this.storage.clear(),this}constructor(t){if(t){const r="__safe_storage__";try{t.setItem(r,"test"),t.removeItem(r),this.storage=t}catch(n){this.storage=null}}else this.storage=null}}},3498:function(t,n,r){r.d(n,{w:function(){return e}});const e=t=>{var n,r,e;return(t=>t instanceof Error&&"isAxiosError"in t)(t)&&"object"===typeof(null===t||void 0===t||null===(n=t.response)||void 0===n?void 0:n.data)&&"object"===typeof(null===t||void 0===t||null===(r=t.response)||void 0===r||null===(e=r.data)||void 0===e?void 0:e.error)}},118:function(t,n,r){r.d(n,{E:function(){return e}});const e={fetching:!1}},73085:function(t,n,r){r.r(n),r.d(n,{A2C_CONFIG_PROCESSING_FAILED:function(){return O},A2C_CONFIG_PROCESSING_SUCCESS:function(){return I},A2C_FETCH_PRODUCTS_RECOMMENDATION:function(){return l},A2C_FETCH_PRODUCTS_RECOMMENDATION_FAILED:function(){return f},A2C_FETCH_PRODUCTS_RECOMMENDATION_SUCCESS:function(){return E},A2C_FETCH_RECOMMENDATION:function(){return T},A2C_FETCH_RECOMMENDATION_CONFIG:function(){return p},A2C_FETCH_RECOMMENDATION_CONFIG_FAILED:function(){return _},A2C_FETCH_RECOMMENDATION_CONFIG_SUCCESS:function(){return C},A2C_INIT_CONFIG_PROCESSING:function(){return A},A2C_INIT_PRODUCT_RECOMMENDATION:function(){return d},ADD_TO_CART_FAILED:function(){return i},ADD_TO_CART_REQUEST:function(){return e},ADD_TO_CART_SUCCESS:function(){return o},HIDE_ADD_T0_CART_MODAL:function(){return c},HIDE_CROSS_PLATFORM_PURCHASE_BLOCKED_MODAL:function(){return s},SHOW_ADD_T0_CART_MODAL:function(){return u},SHOW_CROSS_PLATFORM_PURCHASE_BLOCKED_MODAL:function(){return a},a2cFetchProductsRecommendation:function(){return y},a2cFetchProductsRecommendationFailed:function(){return m},a2cFetchProductsRecommendationSuccess:function(){return N},a2cFetchRecommendation:function(){return L},a2cFetchRecommendationConfig:function(){return R},a2cFetchRecommendationConfigFailed:function(){return D},a2cFetchRecommendationConfigSuccess:function(){return M},a2cInitConfigProcessing:function(){return P},a2cSetConfigProcessingFailed:function(){return F},a2cSetConfigProcessingSuccess:function(){return w},addToCart:function(){return U},hideAddToCartModal:function(){return V},hideCrossPlatformPurchaseBlockedModal:function(){return h},initRecommendation:function(){return v},showAddToCartModal:function(){return g},showCrossPlatformPurchaseBlockedModal:function(){return S}});const e="shoppingCart/ADD_TO_CART_REQUEST",o="shoppingCart/ADD_TO_CART_SUCCESS",i="shoppingCart/ADD_TO_CART_FAILED",u="shoppingCart/SHOW_ADD_T0_CART_MODAL",c="shoppingCart/HIDE_ADD_T0_CART_MODAL",a="shoppingCart/SHOW_CROSS_PLATFORM_PURCHASE_BLOCKED_MODAL",s="shoppingCart/HIDE_CROSS_PLATFORM_PURCHASE_BLOCKED_MODAL",d="shoppingCart/A2C_INIT_PRODUCT_RECOMMENDATION",p="shoppingCart/A2C_FETCH_RECOMMENDATION_CONFIG",C="shoppingCart/A2C_FETCH_RECOMMENDATION_CONFIG_SUCCESS",_="shoppingCart/A2C_FETCH_RECOMMENDATION_CONFIG_FAILED",l="shoppingCart/A2C_FETCH_PRODUCTS_RECOMMENDATION",E="shoppingCart/A2C_FETCH_PRODUCTS_RECOMMENDATION_SUCCESS",f="shoppingCart/A2C_FETCH_PRODUCTS_RECOMMENDATION_FAILED",T="shoppingCart/A2C_FETCH_RECOMMENDATION",A="shoppingCart/A2C_INIT_CONFIG_PROCESSING",I="shoppingCart/A2C_CONFIG_PROCESSING_SUCCESS",O="shoppingCart/A2C_CONFIG_PROCESSING_FAILED",g=t=>({type:u,payload:t}),S=()=>({type:a}),h=()=>({type:s}),v=t=>({type:d,fetchParams:t}),R=()=>({type:p}),M=t=>({type:C,config:t}),D=t=>({type:_,error:t}),y=()=>({type:l}),N=t=>({type:E,recommendations:t}),m=t=>({type:f,error:t}),P=t=>({type:A,rawRecommendation:t}),w=t=>({type:I,config:t}),F=t=>({type:O,error:t}),L=t=>({type:T,config:t}),U=(t,n)=>({type:e,payload:t,shouldFetchRecommendations:n}),V=()=>({type:c})},85564:function(t,n,r){r.d(n,{Z:function(){return e}});const e={isVisible:!1,isPending:!1,errors:[],savedProductIds:[],products:[],offer:void 0,productRecommendation:r(118).E,productsTotalPrice:0}},70839:function(t,n,r){r.d(n,{_:function(){return o}});var e=r(85564);const o=t=>{var n;return(null===(n=t.shoppingCart)||void 0===n?void 0:n.addToCartModal)||e.Z}},57571:function(t,n,r){r.d(n,{G$:function(){return c},HI:function(){return u},Jr:function(){return i},mx:function(){return e},tX:function(){return a},zo:function(){return o}});const e=3e5,o=6048e5,i="shoppingCart.cartOverview",u="order_recap",c="cartOverview",a="cart"},9933:function(t,n,r){r.d(n,{Al:function(){return u},Js:function(){return s},L5:function(){return c},j1:function(){return e},p5:function(){return o},uv:function(){return a},wA:function(){return d},zx:function(){return i}});const e="shoppingCart/CartOverview/GET_CART_OVERVIEW_REQUEST",o="shoppingCart/CartOverview/GET_CART_OVERVIEW_SUCCESS",i="shoppingCart/CartOverview/GET_CART_OVERVIEW_FAILED",u="shoppingCart/CartOverview/GET_CART_OVERVIEW_MANAGER",c="shoppingCart/CartOverview/CLEAN_CART_OVERVIEW_REQUEST",a="shoppingCart/CartOverview/CLEAN_CART_OVERVIEW_SUCCESS",s=()=>({type:u}),d=()=>({type:c})},32828:function(t,n,r){r.d(n,{Q:function(){return o},k:function(){return e}});const e={itemsCount:0,productCount:0,productsTotalPrice:0,contents:{},id:0},o={itemsCount:0,productCount:0,productsTotalPrice:0,contents:{},fetching:!1,error:"",id:0}},55867:function(t,n,r){r.d(n,{M:function(){return u}});var e=r(64959),o=r(92493),i=r(57571);const u=t=>{let{cartOverviewContents:n,id:r,owner:u,ttl:c,productsTotalPrice:a}=t;try{const t=e.SafeStorage.getLocalStorage(),o={ttl:c,owner:u};t.setItem(i.Jr,{contents:n,id:r,productsTotalPrice:a},o)}catch(s){(0,o.x)(new Error("fail to write in local storage"),"cartOverview")}}},63201:function(t,n,r){r.d(n,{L:function(){return g}});var e=r(66699),o=r(3498),i=r(24157),u=r(88422),c=r(92493),a=r(64959),s=r(10239),d=r(3654),p=r(60456),C=r(27838),_=r(32828),l=r(19274);const E=async()=>{var t,n,r;return(t=>{const n=_.k,r=null===t||void 0===t?void 0:t.overview,e=null===t||void 0===t?void 0:t.id,o=null===t||void 0===t?void 0:t.productsTotalPrice;return t&&r&&0!==Object.keys(r).length?(n.contents=r,n.productCount=Object.keys(r).length,n.itemsCount=(0,l.r)(r),n.id=Number(e)||0,n.productsTotalPrice=o||0,n):n})(null===(t=(await s.M.get("".concat((0,p.W)("MS_API_URL")).concat("/web/api/v1/cart-module/overview"),{headers:{[d.WM.X_MM_PLATFORM]:(0,C.Xf)().toUpperCase()}})).data)||void 0===t||null===(n=t.content)||void 0===n||null===(r=n.cart)||void 0===r?void 0:r.main)||_.Q};var f=r(57571),T=r(9933);const A=t=>{let{isAuthenticated:n,owner:r,ttl:e}=t;if(!r)return(0,c.x)(new Error("".concat(n?"userId":"visitorId"," undefined")),"cartOverview"),null;const o={owner:r,ttl:e};return(t=>{let{key:n,options:r}=t;return a.SafeStorage.getLocalStorage().getItem(n,r)})({key:f.Jr,options:o})};var I=r(55867);function*O(){try{let t;const{isAuthenticated:n,userId:r}=yield(0,e.Ys)(u.aF),o=yield(0,e.Ys)(i.g),c="".concat(n?r:o),s=n?f.mx:f.zo,d=A({isAuthenticated:n,owner:c,ttl:s});!d&&n||!a.SafeStorage.getLocalStorage().isStorageAvailable?(t=yield(0,e.RE)(E),(0,I.M)({cartOverviewContents:t.contents,id:t.id,owner:c,ttl:s,productsTotalPrice:t.productsTotalPrice||0})):t=(t=>{const n={itemsCount:0,contents:{},productCount:0,id:0,productsTotalPrice:0};if(!t||!Object.keys(t.contents).length)return n;const r=Object.values(t.contents).reduce(((t,n)=>t+n)),e=Object.keys(t.contents).length;return{itemsCount:r,contents:t.contents,id:t.id,productCount:e,productsTotalPrice:t.productsTotalPrice}})(d),yield(0,e.gz)({type:T.p5,cartOverview:t})}catch(d){var t,n,r,s;const{isAuthenticated:a,userId:p}=yield(0,e.Ys)(u.aF),C=yield(0,e.Ys)(i.g),_="".concat(a?p:C),l=a?f.mx:f.zo;404===(null===d||void 0===d||null===(t=d.response)||void 0===t?void 0:t.status)&&"CART_NOT_FOUND"===(null===d||void 0===d||null===(n=d.response)||void 0===n||null===(r=n.data)||void 0===r||null===(s=r.error)||void 0===s?void 0:s.app_code)?(0,I.M)({cartOverviewContents:{},id:0,owner:_,ttl:l,productsTotalPrice:0}):((0,o.w)(d)||(0,c.x)(d,"cartOverview","cartOverviewManager"),yield(0,e.gz)({type:T.zx,error:null===d||void 0===d?void 0:d.message}))}}function*g(){yield(0,e.Fm)(T.Al,O)}},91696:function(t,n,r){r.d(n,{AJ:function(){return i},OI:function(){return u},St:function(){return e},VE:function(){return o}});const e="shoppingCart/ASIDE_CART_RETRIEVAL_REQUEST",o="shoppingCart/ASIDE_CART_RETRIEVAL_SUCCESS",i="shoppingCart/ASIDE_CART_RETRIEVAL_FAILED",u=()=>({type:e})},61139:function(t,n,r){r.d(n,{$Y:function(){return d},BN:function(){return i},W$:function(){return o},eU:function(){return s},ko:function(){return a},t:function(){return c},ui:function(){return e},yU:function(){return u}});const e="shoppingCart/MOVE_ITEM_TO_MAIN_REQUEST",o="shoppingCart/MOVE_ITEMS_TO_MAIN_REQUEST",i="shoppingCart/MOVE_ITEM_TO_MAIN_SUCCESS",u="shoppingCart/MOVE_ITEM_TO_MAIN_FAILED",c=t=>{let{position:n,removedProduct:r}=t;return{type:e,payload:{position:n,removedProduct:r}}},a=t=>({type:o,payload:{productIds:t}}),s=(t,n)=>({type:i,payload:{product:t,flow:n}}),d=t=>{let{position:n,removedProduct:r}=t;return{type:u,payload:{position:n,removedProduct:r}}}},12562:function(t,n,r){r.d(n,{Bg:function(){return u},Wj:function(){return a},X3:function(){return o},cu:function(){return i},e$:function(){return e},rH:function(){return c}});const e="shoppingCart/MAIN_CART_ITEM_ADDITION_REQUEST",o="shoppingCart/MAIN_CART_ITEM_ADDITION_SUCCESS",i="shoppingCart/MAIN_CART_ITEM_ADDITION_FAILED",u=t=>{let{position:n,productId:r,removedProduct:o}=t;return{type:e,payload:{position:n,productId:r,removedProduct:o}}},c=t=>({type:o,payload:{mainCartLight:{...t}}}),a=t=>{let{position:n,productId:r}=t;return{type:i,payload:{position:n,productId:r}}}},57545:function(t,n,r){r.d(n,{L$:function(){return o},Tm:function(){return a},dy:function(){return u},fv:function(){return e},l0:function(){return i},ve:function(){return c}});const e="shoppingCart/MAIN_CART_ITEM_DELETION_REQUEST",o="shoppingCart/MAIN_CART_ITEM_DELETION_SUCCESS",i="shoppingCart/MAIN_CART_ITEM_DELETION_FAILED",u=t=>{let{productId:n,removedProduct:r,position:o,displayAlertMessage:i=!0}=t;return{type:e,payload:{productId:n,displayAlertMessage:i,removedProduct:r,position:o}}},c=t=>({type:i,payload:t}),a=function(t,n){let r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],e=arguments.length>3?arguments[3]:void 0;return{type:o,payload:{mainCartLight:t,productId:n,displayAlertMessage:r,removedProduct:e}}}},42770:function(t,n,r){r.d(n,{$x:function(){return a},Cy:function(){return e},Uh:function(){return d},di:function(){return s},iY:function(){return c},nf:function(){return u},po:function(){return i},ux:function(){return o}});const e="shoppingCart/MAIN_CART_ITEM_EDITION_REQUEST",o="shoppingCart/MAIN_CART_ITEM_EDITION_SUCCESS",i="shoppingCart/MAIN_CART_ITEM_EDITION_CALLED",u="shoppingCart/MAIN_CART_ITEM_EDITION_FAILED",c=(t,n)=>({type:e,payload:{quantity:t,productId:n}}),a=t=>({type:i,payload:{productId:t}}),s=(t,n,r)=>({type:o,payload:{mainCartLight:t,productId:n,diff:r}}),d=(t,n)=>({type:u,payload:{productId:t,diff:n}})},65329:function(t,n,r){r.d(n,{$P:function(){return a},Dv:function(){return e},Ps:function(){return u},Tv:function(){return i},qV:function(){return o},rB:function(){return c}});const e="shoppingCart/MAIN_CART_RETRIEVAL_REQUEST",o="shoppingCart/MAIN_CART_RETRIEVAL_SUCCESS",i="shoppingCart/MAIN_CART_RETRIEVAL_FAILED",u=t=>({type:i,error:t}),c=t=>({type:o,payload:t}),a=()=>({type:e})},52728:function(t,n,r){r.d(n,{Ge:function(){return e},NV:function(){return u},Tq:function(){return o},mE:function(){return c},wb:function(){return a},z:function(){return i}});const e="shoppingCart/MOVE_ITEM_TO_ASIDE_REQUEST",o="shoppingCart/MOVE_ITEM_TO_ASIDE_SUCCESS",i="shoppingCart/MOVE_ITEM_TO_ASIDE_FAILED",u=t=>{let{productId:n,removedProduct:r,position:o,showStatusMessage:i=!0}=t;return{type:e,payload:{productId:n,showStatusMessage:i,removedProduct:r,position:o}}},c=(t,n,r,e)=>({type:o,payload:{product:t,showStatusMessage:n,flow:r,mainCartLight:e}}),a=t=>{let{productId:n,position:r,removedProduct:e,showStatusMessage:o}=t;return{type:i,payload:{productId:n,showStatusMessage:o,position:r,removedProduct:e}}}},88877:function(t,n,r){r.d(n,{P:function(){return e}});const e={id:"",items:[],prices:{cartTotalPrice:0,cartTotalPriceExcVat:0,estimatedShippingPrice:0,productsTotalPrice:0,productsTotalPriceExcVat:0,vatCost:0},showCopyShareUrlModal:!1}},92493:function(t,n,r){r.d(n,{x:function(){return i}});var e=r(28314),o=r(44179);const i=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Error("!undefined error!"),n=arguments.length>1?arguments[1]:void 0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"shoppingCart";(0,e.P)().then((e=>{e.withScope((o=>{o.setTag(r,n),e.captureException(t)}))})).catch((()=>o.Z.error(t)))}},19274:function(t,n,r){r.d(n,{r:function(){return e}});const e=t=>t?Object.values(t).reduce(((t,n)=>t+n),0):0},43060:function(t,n,r){r.d(n,{H:function(){return o}});var e=r(88877);const o=t=>{var n,r;return(null===(n=t.shoppingCart)||void 0===n||null===(r=n.carts)||void 0===r?void 0:r.main)||e.P}}}]);
//# sourceMappingURL=47724-af30a7611d7cbf14.js.map